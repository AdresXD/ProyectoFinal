<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layout/layout :: head"></head>
<body class="bg-stone-900 text-stone-100 flex flex-col min-h-screen w-screen">

<header th:replace="layout/layout :: header"></header>

<div class="w-full max-w-6xl mx-auto pt-32 px-6">



    <h1 class="text-4xl font-bold text-yellow mb-6 font-['Poppins']">
        [[${title}]]
    </h1>

    <!-- Tabla de mentorías -->
    <table class="w-full text-left border-collapse border border-gray-300 rounded-lg overflow-hidden">
        <thead class="bg-yellow-600 text-stone-900">
        <tr>
            <th class="p-3 border border-gray-300">ID</th>
            <th class="p-3 border border-gray-300">Calificación</th>
            <th class="p-3 border border-gray-300">Logo</th>
            <th class="p-3 border border-gray-300">Fecha</th>
            <th class="p-3 border border-gray-300">Observaciones</th>
            <th class="p-3 border border-gray-300">ID Mentor</th>
            <th class="p-3 border border-gray-300">ID StartUp</th>
            <th class="p-3 border border-gray-300">Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="mentoria : ${mentorias}" class="odd:bg-stone-700 even:bg-stone-800">
            <td class="p-3 border border-gray-300">[[${mentoria.idMentoria}]]</td>
            <td class="p-3 border border-gray-300">[[${mentoria.calificacion}]]</td>
            <td class="p-3 border border-gray-300">
                <img th:src="@{${mentoria.logo}}" alt="Logo" class="w-16 h-16 object-contain" />
            </td>
            <td class="p-3 border border-gray-300">[[${mentoria.fecha}]]</td>
            <td class="p-3 border border-gray-300">[[${mentoria.observaciones}]]</td>
            <td class="p-3 border border-gray-300">[[${mentoria.idMentor}]]</td>
            <td class="p-3 border border-gray-300">[[${mentoria.idStartUp}]]</td>
            <td class="p-3 border border-gray-300 space-x-2">
                <a th:href="@{/mentorias/ver/{id}(id=${mentoria.idMentoria})}"
                   class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition">
                    Ver Detalles
                </a>
                <form th:action="@{/mentorias/eliminar/{id}(id=${mentoria.idMentoria})}" method="post"
                      onsubmit="return confirmarEliminacion(event,this);" class="inline">
                    <button type="submit"
                            class="bg-red-800 text-white px-3 py-1 rounded hover:bg-red-600 transition">
                        Eliminar
                    </button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- Toast de éxito -->
<div id="toast-exito" class="fixed top-5 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-xl
    shadow-xl transition-opacity duration-300 opacity-0 z-50 text-lg font-semibold"
     th:if="${mensajeExito}" th:text="${mensajeExito}">
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    window.addEventListener("DOMContentLoaded", function () {
        const toast = document.getElementById("toast-exito");
        if (toast) {
            toast.classList.remove("opacity-0");
            toast.classList.add("opacity-100");
            setTimeout(() => {
                toast.classList.remove("opacity-100");
                toast.classList.add("opacity-0");
            }, 3000);
        }
    });

    function confirmarEliminacion(event, form) {
        event.preventDefault();
        Swal.fire({
            title: "¿Estás seguro?",
            text: "Esta acción no se puede deshacer.",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#991b1b",
            cancelButtonColor: "#f59e0b",
            confirmButtonText: "Sí, eliminar",
            cancelButtonText: "Cancelar"
        }).then((result) => {
            if (result.isConfirmed) {
                form.submit();
            }
        });
    }
</script>

<footer th:replace="layout/layout :: footer"></footer>

</body>
</html>
